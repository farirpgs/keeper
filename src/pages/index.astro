---
import {
  AspectRatio,
  Box,
  Card,
  Flex,
  Grid,
  Heading,
  Text,
} from "@radix-ui/themes";
import { Image } from "astro:assets";
import { DL } from "../domains/DL";
import Layout from "../layouts/Layout.astro";

const gamesWithCreators = await DL.getAllGamesWithCreators();
---

<Layout title="Keeper" withBanner>
  <Flex direction="column" gap="6">
    <Heading size="9">Keeper</Heading>
    <Grid
      columns={{
        sm: "2",
        lg: "3",
      }}
      gap="6"
      width="auto"
    >
      {
        gamesWithCreators.map((item) => {
          return (
            <Card variant="ghost">
              <a href={`/library/${item.game.slug}`}>
                <Flex
                  gap="2"
                  align="start"
                  direction={"column"}
                  position={"relative"}
                >
                  <AspectRatio ratio={6 / 4}>
                    <Image
                      src={item.game.data.image}
                      alt={item.game.data.name}
                      style={{
                        borderRadius: "var(--radius-2)",
                        objectFit: "cover",
                        width: "100%",
                        height: "100%",
                      }}
                      inferSize
                    />
                  </AspectRatio>

                  <Box
                    position={"absolute"}
                    className="bottom-0 w-full left-0 h-[50%]"
                    style={{
                      borderRadius: "var(--radius-2)",
                      background:
                        "linear-gradient(rgba(0, 0, 0, 0) 10%, rgba(0, 0, 0, .8) 50%, rgba(0, 0, 0, .8) 100%)",
                    }}
                  />
                  <Box position={"absolute"} className="bottom-0 w-full left-0">
                    <Box className="px-4 py-4">
                      <Text as="div" size="6" weight="bold">
                        {item.game.data.name}
                      </Text>
                      <Text as="div" size="5" color="gray">
                        by {item.creator.data.name}
                      </Text>
                    </Box>
                  </Box>
                </Flex>
              </a>
            </Card>
          );
        })
      }
    </Grid>
  </Flex>
</Layout>
