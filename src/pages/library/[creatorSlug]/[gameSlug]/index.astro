---
import { Flex, Heading, Section } from "@radix-ui/themes";
import type {
  GetStaticPathsItem,
  InferGetStaticParamsType,
  InferGetStaticPropsType,
} from "astro";
import { getCollection } from "astro:content";
import Layout from "../../../../layouts/Layout.astro";

type Params = InferGetStaticParamsType<typeof getStaticPaths>;
type Props = InferGetStaticPropsType<typeof getStaticPaths>;

const props = Astro.props as Props;
const params = Astro.params as Params;

export async function getStaticPaths() {
  const games = await getCollection("games");
  return games.map((game) => {
    return {
      params: {
        creatorSlug: game.data.creator.id,
        gameSlug: game.id.split("/").pop(),
      },
      props: {
        game: game,
      },
    } satisfies GetStaticPathsItem;
  });
}
---

<Layout title="Welcome to Astro.">
  <Section>
    <Flex direction="column" gap="6">
      <Heading size="9">{props.game.data.name}</Heading>
    </Flex>
  </Section>
</Layout>
